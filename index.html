<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Intercontinental Audio System - Wallpaper Edition</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        :root {
            --bg-color: #12121e;
            --secondary-bg-color: rgba(30, 30, 48, 0.7); /* Transparência para o papel de parede */
            --text-color: #e0e0e0;
            --highlight-color: #00ffc8;
            --accent-color: #4b0082;
            --screen-bg: rgba(13, 13, 32, 0.85);
            --screen-text: #00ffc8;
            --shadow-dark: #000000;
            --shadow-light: #22223a;
        }

        /* --- TEMAS COM OPACIDADE AJUSTADA PARA O FUNDO APARECER --- */
        .industrial-cyber { --bg-color: transparent; --secondary-bg-color: rgba(26, 26, 26, 0.8); --screen-bg: rgba(0,0,0,0.9); --highlight-color: #ff0077; }
        .cosmic-dark { --bg-color: transparent; --secondary-bg-color: rgba(30, 30, 48, 0.8); --screen-bg: rgba(13, 13, 32, 0.9); --highlight-color: #00ffc8; }
        .neon-city { --bg-color: transparent; --secondary-bg-color: rgba(42, 10, 42, 0.8); --screen-bg: rgba(26, 5, 26, 0.9); --highlight-color: #ff1aff; }
        /* Outros temas seguem a mesma lógica... */

        body { 
            font-family: 'Orbitron', sans-serif; 
            /* CONFIGURAÇÃO DO PAPEL DE PAREDE */
            background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), 
                              url('https://radiointercontinental.com.br/wp-content/uploads/2023/10/fundo-site.jpg'); /* Link sugerido da Intercontinental */
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            background-repeat: no-repeat;
            
            color: var(--text-color); 
            transition: all 0.5s ease; 
            user-select: none;
            min-height: 100vh;
            margin: 0;
        }

        /* EFEITO DE VIDRO NOS PAINÉIS */
        .glass-panel { 
            backdrop-filter: blur(12px); 
            -webkit-backdrop-filter: blur(12px);
            background-color: var(--secondary-bg-color);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .bg-secondary { background-color: var(--secondary-bg-color); backdrop-filter: blur(8px); }
        .bg-screen { background-color: var(--screen-bg); backdrop-filter: blur(4px); }
        
        .text-glow { text-shadow: 0 0 12px var(--highlight-color); }
        .shadow-out { box-shadow: 10px 10px 30px rgba(0,0,0,0.5); }
        .shadow-in { box-shadow: inset 2px 2px 10px rgba(0,0,0,0.5); }

        .control-button {
            transition: all 0.2s ease;
            border: 2px solid var(--accent-color);
            background-color: rgba(0,0,0,0.3);
            color: var(--highlight-color);
        }
        .control-button:hover {
            transform: scale(1.05);
            background-color: var(--accent-color);
            box-shadow: 0 0 15px var(--highlight-color);
        }

        input[type=range] { -webkit-appearance: none; background: rgba(0,0,0,0.5); border-radius: 5px; }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none; width: 18px; height: 18px; border-radius: 50%;
            background: var(--highlight-color); box-shadow: 0 0 10px var(--highlight-color);
        }
    </style>
</head>
<body class="cosmic-dark">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback, useRef, memo } = React;

        const EQ_FREQUENCIES = [60, 150, 400, 1000, 2500, 6000, 12000];
        const EQ_PRESETS = {
            'flat': [0, 0, 0, 0, 0, 0, 0],
            'rock': [5, 3, -4, -5, -2, 4, 6],
            'pop': [-2, 0, 2, 4, 2, 0, -2],
            'dance': [6, 4, 2, 0, -2, -3, 0],
        };
        const THEMES = ['cosmic-dark', 'neon-city', 'industrial-cyber', 'deep-ocean', 'retro-wave'];

        // --- HOOK DE ÁUDIO ---
        const useAudioAnalyzer = (streamUrl) => {
            const audioRef = useRef(null);
            const mainAnalyserRef = useRef(null);
            const gainNodeRef = useRef(null);
            const [isPlaying, setIsPlaying] = useState(false);
            const [audioData, setAudioData] = useState({
                frequencyData: new Uint8Array(128),
                volume: 80,
                vu: { l1: 0, r1: 0 }
            });

            const initAudio = () => {
                if (mainAnalyserRef.current) return;
                const audio = new Audio(streamUrl);
                audio.crossOrigin = "anonymous";
                audioRef.current = audio;

                const context = new (window.AudioContext || window.webkitAudioContext)();
                const source = context.createMediaElementSource(audio);
                const analyser = context.createAnalyser();
                const gainNode = context.createGain();

                analyser.fftSize = 256;
                gainNode.gain.value = 0.8;
                
                source.connect(analyser);
                analyser.connect(gainNode);
                gainNode.connect(context.destination);

                mainAnalyserRef.current = analyser;
                gainNodeRef.current = gainNode;
            };

            const play = () => {
                initAudio();
                audioRef.current.play();
                setIsPlaying(true);
            };

            const pause = () => {
                audioRef.current.pause();
                setIsPlaying(false);
            };

            useEffect(() => {
                let animation;
                const update = () => {
                    if (isPlaying && mainAnalyserRef.current) {
                        const data = new Uint8Array(mainAnalyserRef.current.frequencyBinCount);
                        mainAnalyserRef.current.getByteFrequencyData(data);
                        
                        // Simulação simples de VU baseada no volume médio
                        const avg = data.reduce((a,b) => a+b, 0) / data.length;
                        
                        setAudioData(prev => ({ 
                            ...prev, 
                            frequencyData: data,
                            vu: { l1: avg * 0.8, r1: avg * 0.85 }
                        }));
                    }
                    animation = requestAnimationFrame(update);
                };
                update();
                return () => cancelAnimationFrame(animation);
            }, [isPlaying]);

            return { isPlaying, audioData, controls: { play, pause } };
        };

        // --- COMPONENTES ---
        const Visualizer = ({ data }) => (
            <div className="flex items-end justify-center gap-1 h-32 w-full bg-black/40 rounded p-2 mb-4 border border-white/10">
                {Array.from(data).slice(0, 40).map((v, i) => (
                    <div key={i} className="bg-highlight w-full transition-all duration-75" 
                         style={{ height: `${(v/255)*100}%`, backgroundColor: 'var(--highlight-color)', boxShadow: '0 0 5px var(--highlight-color)' }}></div>
                ))}
            </div>
        );

        const App = () => {
            const { isPlaying, audioData, controls } = useAudioAnalyzer("https://streaming01.shoutcast.com.br/8082/stream"); // URL Exemplo
            const [currentTheme, setCurrentTheme] = useState('cosmic-dark');

            return (
                <div className={`min-h-screen flex items-center justify-center p-4 ${currentTheme}`}>
                    <div className="max-w-4xl w-full glass-panel p-8 rounded-3xl shadow-out border-t border-white/20">
                        <header className="text-center mb-8">
                            <h1 className="text-3xl font-bold tracking-tighter text-glow mb-2">INTERCONTINENTAL</h1>
                            <p className="font-mono text-xs opacity-60 uppercase tracking-[0.5em]">Web Radio System v2.0</p>
                        </header>

                        <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                            {/* LADO ESQUERDO: PLAYER */}
                            <div className="flex flex-col justify-center">
                                <Visualizer data={audioData.frequencyData} />
                                
                                <div className="bg-screen p-6 rounded-xl shadow-in mb-6 text-center border border-highlight/20">
                                    <p className="text-highlight font-mono text-xl text-glow mb-1">STATION ONLINE</p>
                                    <p className="text-xs opacity-50">128KBPS STEREO</p>
                                </div>

                                <div className="flex justify-center gap-6">
                                    <button onClick={isPlaying ? controls.pause : controls.play} 
                                            className="control-button w-20 h-20 rounded-full text-2xl shadow-glow">
                                        <i className={`fas ${isPlaying ? 'fa-pause' : 'fa-play'}`}></i>
                                    </button>
                                </div>
                            </div>

                            {/* LADO DIREITO: CONTROLES */}
                            <div className="space-y-6">
                                <div className="bg-black/30 p-4 rounded-lg">
                                    <p className="text-xs font-bold mb-3 opacity-70 uppercase">Themes</p>
                                    <div className="flex flex-wrap gap-2">
                                        {THEMES.map(t => (
                                            <button key={t} onClick={() => setCurrentTheme(t)} 
                                                    className={`px-3 py-1 rounded text-[10px] uppercase border ${currentTheme === t ? 'bg-highlight text-black' : 'border-white/20'}`}>
                                                {t.replace('-', ' ')}
                                            </button>
                                        ))}
                                    </div>
                                </div>

                                <div className="bg-black/30 p-4 rounded-lg">
                                    <p className="text-xs font-bold mb-3 opacity-70 uppercase">Volume Control</p>
                                    <input type="range" className="w-full" />
                                </div>

                                <div className="grid grid-cols-2 gap-4">
                                    <div className="bg-screen p-3 rounded border border-white/5">
                                        <p className="text-[10px] opacity-50">L-CHANNEL</p>
                                        <div className="h-2 bg-black/50 mt-1 rounded overflow-hidden">
                                            <div className="h-full bg-highlight transition-all" style={{width: `${audioData.vu.l1}%`}}></div>
                                        </div>
                                    </div>
                                    <div className="bg-screen p-3 rounded border border-white/5">
                                        <p className="text-[10px] opacity-50">R-CHANNEL</p>
                                        <div className="h-2 bg-black/50 mt-1 rounded overflow-hidden">
                                            <div className="h-full bg-highlight transition-all" style={{width: `${audioData.vu.r1}%`}}></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
