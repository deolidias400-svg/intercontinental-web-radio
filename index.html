<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Intercontinental Web Radio - Ultra Custom LCD Touch System</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* ==================================== */
        /* === Variáveis CSS Globais/Temas === */
        /* ==================================== */
        :root {
            /* Tema Padrão: Cosmic Dark (Mantido como fallback) */
            --bg-color: #12121e;
            --secondary-bg-color: #1e1e30;
            --text-color: #e0e0e0;
            --highlight-color: #00ffc8; /* Ciano Neon */
            --accent-color: #4b0082; /* Roxo Profundo */
            --button-text-color: #fff;
            --control-bg: rgba(255, 255, 255, 0.05);
            --glow-color: var(--highlight-color);
            --shadow-dark: #0a0a14;
            --shadow-light: #22223a;
            --box-shadow-in: inset 5px 5px 10px var(--shadow-dark), inset -5px -5px 10px var(--shadow-light);
            --box-shadow-out: 8px 8px 16px var(--shadow-dark), -8px -8px 16px var(--shadow-light);
            --status-online-color: #00ff00; /* Neon Green */
            --status-offline-color: #FF4500; /* Red-Orange */
            --visualizer-bg: radial-gradient(circle, var(--secondary-bg-color) 40%, var(--bg-color) 100%);
            --screen-bg: #0d0d20;
            --screen-text: var(--highlight-color);
            --screen-border: 1px solid var(--highlight-color);
            --knob-color: var(--highlight-color);
        }

        /* TEMA PADRÃO: INDUSTRIAL CYBERPUNK */
        .industrial-cyber { 
            --bg-color: #0d0d0d; /* Preto Quase Puro */
            --secondary-bg-color: #1a1a1a; /* Cinza Escuro para Painéis */
            --text-color: #c0c0c0;
            --highlight-color: #ff0077; /* Magenta Neon Agressivo */
            --accent-color: #00ffff; /* Ciano Neon para Contraste */
            --button-text-color: #0d0d0d; 
            --control-bg: rgba(255, 255, 255, 0.03); 
            --glow-color: var(--highlight-color);
            --shadow-dark: #000;
            --shadow-light: #333333;
            --box-shadow-in: inset 3px 3px 6px var(--shadow-dark), inset -3px -3px 6px var(--shadow-light);
            --box-shadow-out: 5px 5px 10px var(--shadow-dark), -5px -5px 10px var(--shadow-light);
            --status-online-color: #39ff14; /* Verde Matriz */
            --screen-bg: #000; 
            --screen-text: var(--highlight-color);
            --screen-border: 2px solid var(--accent-color); /* Borda ciano */
            --knob-color: var(--highlight-color); 
        }

        /* 26 Temas (Início) - (Os temas foram mantidos como estavam, mas o seletor está completo) */
        .cosmic-dark { /* Default */ } 
        .solar-flare { --bg-color: #2b0b00; --secondary-bg-color: #4f1500; --text-color: #fff; --highlight-color: #ffaa00; --accent-color: #ff4500; --knob-color: #fff; }
        .deep-ocean { --bg-color: #001f3f; --secondary-bg-color: #003366; --text-color: #b0e0e6; --highlight-color: #7fffd4; --accent-color: #4169e1; --knob-color: #fff; }
        .neon-city { --bg-color: #1c0029; --secondary-bg-color: #2e0040; --text-color: #f0f0f0; --highlight-color: #ff00ff; --accent-color: #00ffff; --knob-color: #ff00ff; }
        .arctic-ice { --bg-color: #f0f8ff; --secondary-bg-color: #e0f0ff; --text-color: #001f3f; --highlight-color: #0077b6; --accent-color: #5882fa; --button-text-color: #fff; --control-bg: rgba(0, 0, 0, 0.1); --shadow-dark: #c0c8d0; --shadow-light: #ffffff; --screen-bg: #cceeff; --screen-text: var(--accent-color); --knob-color: #5882fa; }
        .retro-crt { --bg-color: #0d131f; --secondary-bg-color: #17243b; --text-color: #39ff14; --highlight-color: #ff9900; --accent-color: #39ff14; --screen-bg: #000; --screen-text: var(--highlight-color); --knob-color: #ff9900; }
        .gold-dust { --bg-color: #3c3c3c; --secondary-bg-color: #5c5c5c; --text-color: #fff; --highlight-color: #ffd700; --accent-color: #b8860b; --button-text-color: #3c3c3c; --knob-color: #ffd700; }
        .martian-sand { --bg-color: #4b2c20; --secondary-bg-color: #6d4b40; --text-color: #f0f0f0; --highlight-color: #ff8c00; --accent-color: #a52a2a; --knob-color: #ff8c00; }
        .emerald-forest { --bg-color: #003300; --secondary-bg-color: #005500; --text-color: #ccffcc; --highlight-color: #3cb371; --accent-color: #228b22; --knob-color: #3cb371; }
        .amethyst-dream { --bg-color: #1e0033; --secondary-bg-color: #3a0066; --text-color: #f0e0ff; --highlight-color: #da70d6; --accent-color: #9932cc; --knob-color: #da70d6; }
        .fire-ice { --bg-color: #0a0a20; --secondary-bg-color: #1a1a35; --text-color: #f0f0f0; --highlight-color: #ff4500; --accent-color: #1e90ff; --knob-color: #ff4500; }
        .concrete-jungle { --bg-color: #2c3e50; --secondary-bg-color: #34495e; --text-color: #ecf0f1; --highlight-color: #f1c40f; --accent-color: #3498db; --knob-color: #f1c40f; }
        .sunset-strip { --bg-color: #331a00; --secondary-bg-color: #663300; --text-color: #fff; --highlight-color: #ff8c69; --accent-color: #ff6347; --knob-color: #ff8c69; }
        .biohazard-green { --bg-color: #000; --secondary-bg-color: #111; --text-color: #aaff00; --highlight-color: #00ff00; --accent-color: #7fff00; --knob-color: #00ff00; }
        .retro-wave { --bg-color: #05001a; --secondary-bg-color: #1a0033; --text-color: #fff; --highlight-color: #ff1493; --accent-color: #00bfff; --glow-color: #ff77e9; --shadow-dark: #000; --shadow-light: #3a0e6e; --knob-color: #ff1493; }
        .pure-white { --bg-color: #ffffff; --secondary-bg-color: #f0f0f0; --text-color: #1a1a1a; --highlight-color: #006aff; --accent-color: #4c4cff; --button-text-color: #fff; --control-bg: rgba(0, 0, 0, 0.1); --shadow-dark: #c0c0c0; --shadow-light: #ffffff; --screen-bg: #e0e0e0; --screen-text: var(--highlight-color); --knob-color: #4c4cff;}
        .chroma-glow { --bg-color: #000000; --secondary-bg-color: #0d0d0d; --text-color: #fff; --highlight-color: #00ffc8; --accent-color: #ff00ff; --button-text-color: #000; --control-bg: rgba(255, 255, 255, 0.1); --glow-color: var(--highlight-color); --shadow-dark: #000; --shadow-light: #252525; --box-shadow-out: 0 0 20px rgba(255, 0, 255, 0.5), 0 0 10px rgba(0, 255, 200, 0.5); --status-online-color: #00ff00; --screen-bg: #000; --screen-text: var(--highlight-color); --knob-color: #ff00ff; }
        .dark-matter { --bg-color: #050505; --secondary-bg-color: #101010; --text-color: #c0c0c0; --highlight-color: #ffcc00; --accent-color: #333333; --button-text-color: #ffcc00; --control-bg: rgba(255, 255, 255, 0.03); --glow-color: var(--highlight-color); --shadow-dark: #000000; --shadow-light: #202020; --box-shadow-out: 0 0 15px rgba(255, 204, 0, 0.4); --visualizer-bg: radial-gradient(circle, var(--secondary-bg-color) 40%, var(--bg-color) 100%); --screen-bg: #101010; --screen-text: var(--highlight-color); --knob-color: #ffcc00; }
        .vaporwave { --bg-color: #0a041c; --secondary-bg-color: #210d40; --text-color: #fff; --highlight-color: #ff77e9; --accent-color: #4ce7ff; --glow-color: #ff77e9; --shadow-dark: #000; --shadow-light: #3a0e6e; --knob-color: #ff77e9; }
        .matrix-code { --bg-color: #000; --secondary-bg-color: #0a0a0a; --text-color: #00ff00; --highlight-color: #39ff14; --accent-color: #00aa00; --glow-color: #39ff14; --shadow-dark: #000; --shadow-light: #111; --screen-bg: #000; --screen-text: var(--highlight-color); --knob-color: #39ff14; }
        .volcano-ash { --bg-color: #301008; --secondary-bg-color: #552010; --text-color: #f0f0f0; --highlight-color: #ff4500; --accent-color: #8b0000; --glow-color: #ff4500; --knob-color: #ff4500; }
        .purple-haze { --bg-color: #240046; --secondary-bg-color: #3e0078; --text-color: #f0e0ff; --highlight-color: #e0b0ff; --accent-color: #800080; --glow-color: #e0b0ff; --knob-color: #e0b0ff; }
        .cyber-red { --bg-color: #1a0000; --secondary-bg-color: #330000; --text-color: #ffc0cb; --highlight-color: #ff1133; --accent-color: #8b0000; --glow-color: #ff1133; --knob-color: #ff1133; }
        .sky-blue { --bg-color: #e6f7ff; --secondary-bg-color: #cceeff; --text-color: #003366; --highlight-color: #0077b6; --accent-color: #4169e1; --button-text-color: #fff; --shadow-dark: #a0c0e0; --shadow-light: #fff; --screen-bg: #e0f0ff; --screen-text: var(--highlight-color); --knob-color: #0077b6;}
        .lime-shock { --bg-color: #111100; --secondary-bg-color: #222200; --text-color: #fff; --highlight-color: #aaff00; --accent-color: #7fff00; --glow-color: #aaff00; --knob-color: #aaff00;}
        .carbon-fiber { --bg-color: #222222; --secondary-bg-color: #333333; --text-color: #cccccc; --highlight-color: #aaaaaa; --accent-color: #555555; --shadow-dark: #111; --shadow-light: #444; --knob-color: #aaaaaa; }
        /* Fim dos temas */


        /* ==================================== */
        /* === ESTILOS DO NOVO MINI SYSTEM === */
        /* ==================================== */

        body {
            font-family: 'Orbitron', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            transition: all 0.7s ease;
            position: relative;
            overflow-x: hidden;
            user-select: none;
        }

        .container {
            background-color: var(--secondary-bg-color);
            padding: 25px;
            border-radius: 12px;
            box-shadow: var(--box-shadow-out);
            max-width: 90%;
            width: 750px;
            margin-top: 20px;
            text-align: center;
            transition: all 0.5s ease;
            position: relative; 
            background-color: var(--secondary-bg-color); 
        }
        
        /* === EFEITO DE PARAFUSOS (BOLT EFFECT) === */
        .bolt {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: var(--shadow-dark);
            border: 1px solid var(--shadow-light);
            border-radius: 50%;
            box-shadow: inset 1px 1px 2px var(--shadow-light), inset -1px -1px 2px var(--shadow-dark);
            z-index: 10;
        }

        .bolt-tl { top: 10px; left: 10px; }
        .bolt-tr { top: 10px; right: 10px; }
        .bolt-bl { bottom: 10px; left: 10px; }
        .bolt-br { bottom: 10px; right: 10px; }


        #banner {
            font-size: clamp(1.5rem, 5vw, 2.2rem);
            font-weight: 700;
            color: var(--highlight-color);
            margin-bottom: 20px;
            text-shadow: 0 0 15px var(--glow-color);
            letter-spacing: 2px;
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 10px;
        }

        /* === TELA DE INFORMAÇÕES (DISPLAY DIGITAL) === */
        #info-screen {
            background-color: var(--screen-bg);
            color: var(--screen-text);
            border: var(--screen-border);
            border-radius: 8px;
            padding: 15px 20px;
            margin-bottom: 25px;
            box-shadow: 0 0 10px var(--glow-color), var(--box-shadow-in);
            font-family: 'Share Tech Mono', monospace;
            text-align: left;
            display: grid;
            grid-template-columns: 1fr 1.5fr 1fr;
            gap: 10px 15px;
            transition: all 0.5s ease;
        }

        #radio-name-display {
            grid-column: 1 / 4;
            font-size: 1.4rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-bottom: 1px dashed var(--screen-text);
            padding-bottom: 5px;
        }
        
        #volume-electronic-display {
            grid-column: 1 / 2;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 1px dashed var(--screen-text);
            padding: 5px;
            border-radius: 4px;
            font-size: 0.8rem;
            text-align: center;
        }

        #volume-level-bar {
            width: 90%;
            height: 8px;
            background-color: var(--shadow-dark);
            border-radius: 4px;
            margin-top: 5px;
            overflow: hidden;
            box-shadow: var(--box-shadow-in);
        }

        #volume-fill {
            height: 100%;
            width: 50%; /* Inicial */
            background: linear-gradient(90deg, var(--status-online-color), var(--highlight-color));
            transition: width 0.1s ease;
        }

        #active-eq-display {
            grid-column: 2 / 3;
            padding-top: 5px;
        }
        
        #active-theme-display {
            grid-column: 3 / 4;
            padding-top: 5px;
        }
        
        #date-time {
            grid-column: 1 / 3;
            text-align: left;
            padding-top: 10px;
        }
        #status {
            grid-column: 3 / 4;
            justify-content: flex-end;
            display: flex;
            align-items: center;
            gap: 5px;
            padding-top: 10px;
        }
        
        /* Estilo para a luz de status */
        #status-light {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-left: 5px;
            box-shadow: 0 0 5px currentColor;
            transition: background-color 0.5s, box-shadow 0.5s;
        }

        .status-online {
            background-color: var(--status-online-color);
        }

        .status-offline {
            background-color: var(--status-offline-color);
        }


        /* ======================================== */
        /* === NOVO LAYOUT DE CONTROLE INTEGRADO === */
        /* ======================================== */
        .control-panel {
            display: flex;
            justify-content: space-around;
            align-items: center;
            width: 100%;
            margin: 25px 0;
            padding: 15px;
            background-color: var(--shadow-dark); 
            border-radius: 10px;
            border: 1px solid var(--accent-color);
            box-shadow: var(--box-shadow-out);
        }

        /* Controles de Reprodução */
        .controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 0; 
            flex-grow: 0;
        }

        /* Botões Aprimorados */
        .controls button {
            max-width: none;
            padding: 10px 15px; 
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--button-text-color);
            background: var(--accent-color);
            box-shadow: 0 0 5px var(--highlight-color), var(--box-shadow-out);
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .controls button:hover {
            opacity: 0.9;
            transform: translateY(-2px);
            box-shadow: 0 0 10px var(--highlight-color), var(--box-shadow-out);
        }

        .controls button:disabled {
            background-color: var(--secondary-bg-color);
            color: var(--text-color);
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: var(--box-shadow-in);
        }
        
        /* Botões Específicos */
        #play { background-color: #00b894; box-shadow: 0 0 15px #00b894; color: #000; }
        #play:hover { background-color: #00997d; }
        #play.active { background-color: var(--status-online-color); color: #000; box-shadow: 0 0 20px var(--status-online-color); }

        #pause { background-color: #f1c40f; box-shadow: 0 0 15px #f1c40f; color: #000; }
        #stop { background-color: #e74c3c; box-shadow: 0 0 15px #e74c3c; color: #fff; }
        #mute-btn.active { background-color: #3498db; color: #000; box-shadow: 0 0 20px #3498db; }

        /* === BOTÃO DE VOLUME GIRATÓRIO (KNOB) === */
        .knob-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 10px;
            background: none;
            border-radius: 8px;
            box-shadow: none;
        }

        .knob-wrapper {
            position: relative;
            width: 80px; 
            height: 80px;
            margin-bottom: 5px;
        }

        #volume-knob {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: var(--secondary-bg-color);
            border: 3px solid var(--accent-color);
            box-shadow: var(--box-shadow-out), inset 0 0 10px rgba(0, 0, 0, 0.5);
            cursor: grab;
            transition: transform 0.1s ease-out;
            position: relative;
            transform-origin: center;
        }
        
        #knob-marker {
            position: absolute;
            top: 5px; 
            left: 50%;
            transform: translateX(-50%);
            width: 6px;
            height: 20px;
            background-color: var(--knob-color);
            border-radius: 2px;
            box-shadow: 0 0 8px var(--knob-color);
        }

        .knob-container label {
            font-size: 0.9rem;
            color: var(--highlight-color);
            font-weight: 700;
        }


        /* VU Meter Estéreo Vertical Aprimorado */
        #transmission-level-indicator {
            background: var(--screen-bg);
            border: var(--screen-border);
            border-radius: 8px;
            box-shadow: 0 0 5px var(--glow-color), var(--box-shadow-in);
            padding: 10px;
            margin: 15px auto;
            width: 90%;
        }
        
        #level-bars-stereo {
            height: 120px; 
            gap: 15px;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            position: relative;
            padding: 0 10px;
            margin-top: 10px;
        }
        
        .level-meter {
            width: 30px; 
            background: var(--bg-color);
            border: 1px solid var(--accent-color);
            height: 100%;
            position: relative;
            overflow: hidden;
            border-radius: 2px;
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.5);
        }

        .level-bar-fill {
            background: linear-gradient(to top, 
                #00ff00 0%, 
                #ffff00 70%, 
                #ff4500 90%, 
                #ff0000 100%);
            position: absolute;
            bottom: 0;
            width: 100%;
            transition: height 0.05s ease-out;
        }

        /* === NOVO: BARRA CENTRAL DE TREBLE PULSANTE === */
        #treble-meter-fill {
            background: linear-gradient(to top, 
                #4ce7ff 0%, /* Ciano Vaporwave */
                #ff77e9 70%, /* Magenta Vaporwave */
                #ff0000 100%); /* Vermelho */
            position: absolute;
            bottom: 0;
            width: 100%;
            transition: height 0.05s ease-out;
        }
        /* FIM NOVO CSS BARRA CENTRAL */
        
        .level-peak-hold {
            position: absolute;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: #ff0000;
            opacity: 0;
            transition: top 0.1s ease-out, opacity 0.5s ease;
            box-shadow: 0 0 5px #ff0000;
            z-index: 5;
        }

        /* Estilos do Visualizador */
        .visualizer-giant-container {
            width: 100%;
            max-width: 450px;
            aspect-ratio: 1 / 1;
            margin: 25px auto;
            border-radius: 15px;
            background: var(--visualizer-bg);
            box-shadow: var(--box-shadow-out), 0 0 30px rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            transition: all 0.7s ease;
            border: 3px solid var(--highlight-color);
        }

        #visualizer-core {
            position: absolute;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background-color: var(--highlight-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: var(--bg-color);
            box-shadow: 0 0 20px var(--glow-color), inset 0 0 10px var(--bg-color);
            z-index: 1;
            transition: all 0.1s ease-out;
        }
        
        .theme-buttons button, .eq-buttons button {
            padding: 8px 12px;
            margin: 5px;
            border-radius: 5px;
            background-color: var(--secondary-bg-color);
            color: var(--highlight-color);
            border: 1px solid var(--accent-color);
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
            font-family: 'Share Tech Mono', monospace;
        }
        
        /* Estilo para sliders */
        .visual-controls input[type="range"], .audio-controls input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            background: var(--control-bg);
            border-radius: 5px;
            box-shadow: var(--box-shadow-in);
            margin-top: 10px;
        }
        .visual-controls input[type="range"]::-webkit-slider-thumb, .audio-controls input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--highlight-color);
            cursor: pointer;
            box-shadow: 0 0 10px var(--glow-color);
        }
        .control-group {
            margin: 15px 0;
            padding: 10px;
            border: 1px dashed var(--accent-color);
            border-radius: 8px;
        }

        /* === CSS para Grupos de Sliders de Áudio (EQ e Delay) === */
        .audio-controls .slider-group {
            display: flex;
            justify-content: space-around;
            gap: 15px;
            margin-top: 15px;
            padding: 10px;
            /* Esta linha é adicionada ao primeiro slider-group, mas removida do segundo se for repetida */
            /* border-top: 1px dashed var(--accent-color); */ 
        }
        .audio-controls .slider-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        .audio-controls .slider-item label {
            margin-bottom: 5px;
            font-size: 0.9rem;
            color: var(--highlight-color);
        }
        /* Fim do novo CSS */


        .theme-buttons button:hover, .eq-buttons button:hover {
            background-color: var(--accent-color);
            color: var(--button-text-color);
            box-shadow: 0 0 10px var(--highlight-color);
        }

        .theme-buttons button.active-theme, .eq-buttons button.active {
            background-color: var(--highlight-color);
            color: var(--secondary-bg-color);
            border-color: var(--highlight-color);
            box-shadow: 0 0 15px var(--glow-color);
            font-weight: bold;
        }

        /* Media Query para Ajustes em Telas Menores */
        @media (max-width: 600px) {
            .control-panel {
                flex-direction: column;
            }
            .controls {
                flex-wrap: wrap;
                margin-bottom: 20px;
            }
            .controls button {
                flex-basis: 45%;
            }
            #info-screen {
                grid-template-columns: 1fr 1fr;
            }
            #radio-name-display {
                grid-column: 1 / 3;
            }
            #volume-electronic-display, #active-eq-display, #active-theme-display, #date-time, #status {
                grid-column: span 1;
            }
            .knob-container {
                flex-direction: column;
            }
            .knob-wrapper {
                width: 90px;
                height: 90px;
            }
            .audio-controls .slider-group {
                flex-direction: column;
            }
            .audio-controls .slider-item {
                margin-bottom: 10px;
            }
        }
    </style>
</head>
<body class="industrial-cyber">
    <div class="container">
        <div class="bolt bolt-tl"></div>
        <div class="bolt bolt-tr"></div>
        <div class="bolt bolt-bl"></div>
        <div class="bolt bolt-br"></div>
        <div id="banner">
            <i class="fas fa-microchip"></i> ULTRA CUSTOM LCD SYSTEM
        </div>

        <div id="info-screen">
            <div id="radio-name-display">MEGA ULTRA CUSTOM SYSTEM</div>
            
            <div id="volume-electronic-display">
                <i class="fas fa-volume-up"></i> VOL: <span id="volume-val">50</span>%
                <div id="volume-level-bar"><div id="volume-fill"></div></div>
            </div>
            
            <div id="active-eq-display">EQ: <span id="eq-name">FLAT</span></div>
            <div id="active-theme-display">TEMA: <span id="theme-name">INDUSTRIAL CYBER</span></div>
            
            <div id="date-time"></div>
            <div id="status">
                <span id="status-text">OFFLINE</span><span id="status-light" class="status-offline"></span>
            </div>
        </div>
        <div id="now-playing">
            Tocando agora: <span id="current-song">Pressione Play para iniciar a Transmissão...</span>
        </div>

        <div id="transmission-level-indicator">
            Transmissão Nível Estéreo:
            <div id="stereo-level-values" style="display: flex; justify-content: space-around; margin-bottom: 5px; font-weight: 700; color: var(--screen-text); font-family: 'Share Tech Mono', monospace;">
                <span id="level-val-l">L: 00 dB</span>
                <span id="level-val-t">T: 00 dB</span> <span id="level-val-r">R: 00 dB</span>
            </div>
            <div id="level-bars-stereo">
                <div class="level-meter left-channel">
                    <div class="level-peak-hold" id="peak-l"></div>
                    <div class="level-bar-fill" id="fill-l"></div>
                </div>
                
                <div class="level-meter treble-channel">
                    <div class="level-peak-hold" id="peak-treble"></div>
                    <div id="treble-meter-fill"></div>
                </div>
                <div class="level-meter right-channel">
                    <div class="level-peak-hold" id="peak-r"></div>
                    <div class="level-bar-fill" id="fill-r"></div>
                </div>
            </div>
        </div>

        <div class="visualizer-giant-container">
            <canvas id="spectrum" width="600" height="600"></canvas>
            <div id="visualizer-core">
                <i class="fas fa-bolt"></i>
            </div>
        </div>
        
        <div class="control-panel">
            <div class="controls">
                <button id="play"><i class="fas fa-play"></i> Play</button>
                <button id="pause" disabled><i class="fas fa-pause"></i> Pause</button>
                <button id="stop" disabled><i class="fas fa-stop"></i> Stop</button>
                <button id="mute-btn"><i class="fas fa-volume-up"></i> Mute</button>
            </div>
            <div class="knob-container">
                <label for="volume-knob">VOLUME</label>
                <div class="knob-wrapper">
                    <div id="volume-knob">
                        <div id="knob-marker"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="0.5" style="display: none;">
        
        <audio id="radio-stream" src="https://stream.zeno.fm/wzcgaal0dnltv" preload="none" crossorigin="anonymous"></audio>

    </div>
    
    <div class="audio-controls container">
        <h3><i class="fas fa-volume-up"></i> Equalizador Manual / Boost</h3>
        <div class="slider-group">
            <div class="slider-item">
                <label for="bass-slider">BASS BOOST (<span id="bass-val">0 dB</span>)</label>
                <input type="range" id="bass-slider" min="-12" max="12" step="1" value="0">
            </div>
            <div class="slider-item">
                <label for="treble-slider">TREBLE BOOST (<span id="treble-val">0 dB</span>)</label>
                <input type="range" id="treble-slider" min="-12" max="12" step="1" value="0">
            </div>
            <div class="slider-item">
                <label for="master-gain-slider">MASTER BOOST (<span id="gain-val">0 dB</span>)</label>
                <input type="range" id="master-gain-slider" min="-10" max="10" step="1" value="0">
            </div>
        </div>
        
        <h3 style="margin-top: 20px;"><i class="fas fa-magic"></i> Efeito Delay / Echo</h3>
        <div class="slider-group" style="border-top: 1px dashed var(--accent-color);">
            <div class="slider-item">
                <label for="delay-time-slider">TEMPO (Segundos: <span id="delay-time-val">0.50</span>)</label>
                <input type="range" id="delay-time-slider" min="0.05" max="1.5" step="0.05" value="0.5">
            </div>
            <div class="slider-item">
                <label for="delay-feedback-slider">FEEDBACK (<span id="delay-feedback-val">50</span>%)</label>
                <input type="range" id="delay-feedback-slider" min="0" max="0.95" step="0.01" value="0.5">
            </div>
            <div class="slider-item">
                <label for="delay-mix-slider">MIX DRY/WET (<span id="delay-mix-val">20</span>%)</label>
                <input type="range" id="delay-mix-slider" min="0" max="1" step="0.01" value="0.2">
            </div>
        </div>
    </div>

    <div class="eq-presets container">
        <h3><i class="fas fa-sliders-h"></i> Equalizador Presets</h3>
        <div class="eq-buttons">
            <button data-eq="flat" class="active">Flat</button>
            <button data-eq="rock">Rock</button>
            <button data-eq="classic">Classic</button>
            <button data-eq="funk">Funk</button>
            <button data-eq="soul">Soul</button>
            <button data-eq="stadium">Stadium</button>
            <button data-eq="salon">Salon</button>
        </div>
    </div>
    
    <div class="visual-controls container">
        <h3><i class="fas fa-eye"></i> Controles Visuais</h3>
        <div class="control-group">
            <label for="sensitivity-slider">Sensibilidade (<span id="sens-val">1.50</span>)</label>
            <input type="range" id="sensitivity-slider" min="1.0" max="2.0" step="0.05" value="1.5">
        </div>
        <div class="control-group">
            <label for="rotation-slider">Taxa de Rotação (<span id="rot-val">0.005</span>)</label>
            <input type="range" id="rotation-slider" min="0.001" max="0.015" step="0.001" value="0.005">
        </div>
        <div class="control-group">
            <label for="smoothing-slider">Suavização (<span id="smooth-val">0.8</span>)</label>
            <input type="range" id="smoothing-slider" min="0.0" max="0.95" step="0.05" value="0.8">
        </div>
        <div class="theme-buttons container">
            <h3><i class="fas fa-paint-brush"></i> Troca de Tema</h3>
            <div id="theme-selectors">
                <button data-theme="industrial-cyber" class="active-theme">Cyber</button>
                <button data-theme="retro-wave">Retro Wave</button>
                <button data-theme="neon-city">Neon City</button>
                <button data-theme="dark-matter">Dark Matter</button>
                <button data-theme="matrix-code">Matrix</button>
            </div>
        </div>
    </div>


<script>
    // ===============================================
    // === JS ESSENCIAL PARA ÁUDIO E CONTROLES ===
    // ===============================================

    // 1. Variáveis Essenciais
    const audioEl = document.getElementById('radio-stream');
    const playBtn = document.getElementById('play');
    const pauseBtn = document.getElementById('pause');
    const stopBtn = document.getElementById('stop');
    const muteBtn = document.getElementById('mute-btn');
    const volumeKnob = document.getElementById('volume-knob');
    const volumeMarker = document.getElementById('knob-marker');
    const volumeValSpan = document.getElementById('volume-val');
    const volumeFill = document.getElementById('volume-fill');
    const statusText = document.getElementById('status-text');
    const statusLight = document.getElementById('status-light');
    const currentSongSpan = document.getElementById('current-song');

    let audioContext;
    let audioSource;
    let masterGainNode;
    let analyser;
    let bassFilter;
    let trebleFilter;
    let delayNode;
    let feedbackGainNode;
    let delayMixGainNode;
    let mainOutputGainNode; // Novo para a saída principal após o Delay
    
    let isPlaying = false;
    let isMuted = false;
    let isContextInitialized = false;

    // Constantes para o Knob
    const minRotation = -135; // 225 graus (mínimo) - 360 (círculo) = -135
    const maxRotation = 135;  // 135 graus (máximo)
    
    // Funções Auxiliares
    const debounce = (func, delay) => {
        let timeout;
        return (...args) => {
            clearTimeout(timeout);
            timeout = setTimeout(() => func(...args), delay);
        };
    };

    // 2. Inicialização da Web Audio API
    function initializeAudioContext() {
        if (isContextInitialized) return;
        
        audioContext = new (window.AudioContext || window.webkitAudioContext)();
        audioSource = audioContext.createMediaElementSource(audioEl);

        // 1. Master Gain Node (Volume Geral após EQ)
        masterGainNode = audioContext.createGain();
        masterGainNode.gain.value = 1; // 1 = Volume normal (0 dB)
        
        // 2. EQ Filters (Baixo e Agudo)
        bassFilter = audioContext.createBiquadFilter();
        bassFilter.type = 'lowshelf';
        bassFilter.frequency.value = 100; // Frequência de corte do Bass (100 Hz)
        bassFilter.gain.value = 0; // Ganho inicial (0 dB)

        trebleFilter = audioContext.createBiquadFilter();
        trebleFilter.type = 'highshelf';
        trebleFilter.frequency.value = 4000; // Frequência de corte do Treble (4 kHz)
        trebleFilter.gain.value = 0; // Ganho inicial (0 dB)
        
        // 3. Nó de Análise (Visualizadores/VU Meters)
        analyser = audioContext.createAnalyser();
        analyser.fftSize = 2048; // Tamanho do FFT para análise de frequência
        
        // 4. Efeito Delay (Echo)
        delayNode = audioContext.createDelay(1.5); // Tempo máximo de delay
        delayNode.delayTime.value = parseFloat(document.getElementById('delay-time-slider').value);

        feedbackGainNode = audioContext.createGain();
        feedbackGainNode.gain.value = parseFloat(document.getElementById('delay-feedback-slider').value);
        
        delayMixGainNode = audioContext.createGain(); // Wet Signal (Sinal com efeito)
        delayMixGainNode.gain.value = parseFloat(document.getElementById('delay-mix-slider').value);

        mainOutputGainNode = audioContext.createGain(); // Saída final

        // Conexões (Routing)
        // Source -> Bass -> Treble -> Analyser (para visual)
        audioSource.connect(bassFilter);
        bassFilter.connect(trebleFilter);
        trebleFilter.connect(masterGainNode); // 1. O Master Gain agora é o "Master Boost"
        masterGainNode.connect(analyser);

        // -- Rota de Áudio Padrão (Dry Signal - Sem Delay) --
        analyser.connect(mainOutputGainNode.gain.value === 1 ? audioContext.destination : mainOutputGainNode); // Conecta ao Output

        // -- Rota do Delay (Wet Signal - Com Delay) --
        // Analyser -> Delay -> Feedback -> Delay Mix
        analyser.connect(delayNode);
        delayNode.connect(feedbackGainNode);
        feedbackGainNode.connect(delayNode); // Loop de Feedback
        feedbackGainNode.connect(delayMixGainNode); // Saída do Loop para o Mix

        // Delay Mix (Sinal Wet) + Saída Padrão (Dry) -> Destination
        mainOutputGainNode.connect(audioContext.destination);
        delayMixGainNode.connect(audioContext.destination);
        
        isContextInitialized = true;
        console.log("Web Audio API inicializada.");
    }
    
    // 3. Funções de Controle do Player
    
    // Atualiza o estado visual do player
    function updatePlayerState(playing) {
        isPlaying = playing;
        playBtn.disabled = playing;
        pauseBtn.disabled = !playing;
        stopBtn.disabled = !playing;
        playBtn.classList.toggle('active', playing);
        statusText.textContent = playing ? 'ONLINE' : 'OFFLINE';
        statusLight.classList.toggle('status-online', playing);
        statusLight.classList.toggle('status-offline', !playing);
        currentSongSpan.textContent = playing ? 'Streaming...' : 'Pressione Play para iniciar a Transmissão...';
    }

    // Ação Play
    playBtn.addEventListener('click', () => {
        initializeAudioContext();
        if (audioContext.state === 'suspended') {
            audioContext.resume();
        }
        
        audioEl.play().then(() => {
            updatePlayerState(true);
            updateVolume(audioEl.volume); // Sincroniza o volume do HTML com o JS
            // Inicia o loop de visualização
            visualizerLoop();
        }).catch(error => {
            console.error("Erro ao tentar tocar o áudio:", error);
            alert("Não foi possível iniciar o stream. Verifique a URL ou as permissões de autoplay.");
            updatePlayerState(false);
        });
    });

    // Ação Pause
    pauseBtn.addEventListener('click', () => {
        audioEl.pause();
        updatePlayerState(false);
    });

    // Ação Stop
    stopBtn.addEventListener('click', () => {
        audioEl.pause();
        audioEl.currentTime = 0;
        updatePlayerState(false);
    });
    
    // Ação Mute
    muteBtn.addEventListener('click', () => {
        isMuted = !isMuted;
        audioEl.muted = isMuted;
        muteBtn.classList.toggle('active', isMuted);
        muteBtn.innerHTML = isMuted ? '<i class="fas fa-volume-mute"></i> Unmute' : '<i class="fas fa-volume-up"></i> Mute';
        
        // Atualiza a exibição de volume (para mostrar 0% no display)
        updateVolumeDisplay(audioEl.volume * 100);
        // Desativa a rotação do knob quando mutado
        volumeKnob.style.pointerEvents = isMuted ? 'none' : 'auto';
    });

    // 4. Controle de Volume (Knob e Display)
    let isDragging = false;
    let initialY = 0;
    let initialRotation = minRotation + (audioEl.volume * (maxRotation - minRotation));
    
    function updateVolume(newVolume) {
        audioEl.volume = newVolume;
        const newRotation = minRotation + (newVolume * (maxRotation - minRotation));
        volumeKnob.style.transform = `rotate(${newRotation}deg)`;
        updateVolumeDisplay(newVolume * 100);
    }
    
    function updateVolumeDisplay(volumePercent) {
        const displayValue = isMuted ? 0 : Math.round(volumePercent);
        volumeValSpan.textContent = displayValue;
        volumeFill.style.width = `${displayValue}%`;
    }

    // Inicia o arrastar
    volumeKnob.addEventListener('mousedown', (e) => {
        if (isMuted) return;
        isDragging = true;
        initialY = e.clientY;
        const currentRotation = parseFloat(volumeKnob.style.transform.replace('rotate(', '').replace('deg)', '')) || minRotation + (audioEl.volume * (maxRotation - minRotation));
        initialRotation = currentRotation;
        volumeKnob.style.cursor = 'grabbing';
    });

    // Move o Knob
    document.addEventListener('mousemove', (e) => {
        if (!isDragging || isMuted) return;

        const deltaY = initialY - e.clientY; // Movimento vertical
        const rotationRange = maxRotation - minRotation;
        
        // Fator de sensibilidade
        const sensitivity = 0.5; 
        
        let newRotation = initialRotation + deltaY * sensitivity;

        // Limita a rotação
        newRotation = Math.max(minRotation, Math.min(maxRotation, newRotation));
        
        // Calcula o novo volume
        const newVolume = (newRotation - minRotation) / rotationRange;
        
        updateVolume(newVolume);
    });

    // Para o arrastar
    document.addEventListener('mouseup', () => {
        if (isDragging) {
            isDragging = false;
            volumeKnob.style.cursor = 'grab';
        }
    });

    // Sincroniza Volume inicial
    updateVolume(0.5); // Começa em 50% de volume

    // 5. Controles de Equalizador (Bass, Treble, Master)
    
    // Função para aplicar os presets de EQ
    const eqPresets = {
        flat: { bass: 0, treble: 0 },
        rock: { bass: 4, treble: 7 },
        classic: { bass: 6, treble: -6 },
        funk: { bass: 8, treble: 4 },
        soul: { bass: 7, treble: 2 },
        stadium: { bass: 5, treble: 5 },
        salon: { bass: -5, treble: 5 }
    };

    function updateEQ(bassGain, trebleGain) {
        if (!isContextInitialized) return;
        bassFilter.gain.setValueAtTime(bassGain, audioContext.currentTime);
        trebleFilter.gain.setValueAtTime(trebleGain, audioContext.currentTime);
        
        document.getElementById('bass-val').textContent = `${bassGain} dB`;
        document.getElementById('treble-val').textContent = `${trebleGain} dB`;
        document.getElementById('bass-slider').value = bassGain;
        document.getElementById('treble-slider').value = trebleGain;
    }
    
    // Sliders de EQ Manual
    document.getElementById('bass-slider').addEventListener('input', (e) => {
        updateEQ(parseFloat(e.target.value), trebleFilter.gain.value);
        document.getElementById('eq-name').textContent = 'CUSTOM';
        document.querySelector('.eq-buttons .active')?.classList.remove('active');
    });

    document.getElementById('treble-slider').addEventListener('input', (e) => {
        updateEQ(bassFilter.gain.value, parseFloat(e.target.value));
        document.getElementById('eq-name').textContent = 'CUSTOM';
        document.querySelector('.eq-buttons .active')?.classList.remove('active');
    });
    
    // Master Boost (Gain)
    document.getElementById('master-gain-slider').addEventListener('input', (e) => {
        if (!isContextInitialized) return;
        const gain = parseFloat(e.target.value);
        masterGainNode.gain.setValueAtTime(Math.pow(10, gain / 20), audioContext.currentTime); // Converte dB para Ganho
        document.getElementById('gain-val').textContent = `${gain} dB`;
    });

    // Botões de Presets
    document.querySelectorAll('.eq-buttons button').forEach(button => {
        button.addEventListener('click', (e) => {
            const presetName = e.target.dataset.eq;
            const preset = eqPresets[presetName];
            
            updateEQ(preset.bass, preset.treble);
            
            document.getElementById('eq-name').textContent = presetName.toUpperCase();
            
            document.querySelector('.eq-buttons .active')?.classList.remove('active');
            e.target.classList.add('active');
        });
    });
    
    // 6. Efeito Delay (Echo) Controles
    
    const updateDelaySettings = debounce(() => {
        if (!isContextInitialized) return;

        const time = parseFloat(document.getElementById('delay-time-slider').value);
        const feedback = parseFloat(document.getElementById('delay-feedback-slider').value);
        const mix = parseFloat(document.getElementById('delay-mix-slider').value);
        
        delayNode.delayTime.setValueAtTime(time, audioContext.currentTime);
        feedbackGainNode.gain.setValueAtTime(feedback, audioContext.currentTime);
        delayMixGainNode.gain.setValueAtTime(mix, audioContext.currentTime);

        document.getElementById('delay-time-val').textContent = time.toFixed(2);
        document.getElementById('delay-feedback-val').textContent = `${Math.round(feedback * 100)}%`;
        document.getElementById('delay-mix-val').textContent = `${Math.round(mix * 100)}%`;
    }, 50);

    document.getElementById('delay-time-slider').addEventListener('input', updateDelaySettings);
    document.getElementById('delay-feedback-slider').addEventListener('input', updateDelaySettings);
    document.getElementById('delay-mix-slider').addEventListener('input', updateDelaySettings);
    
    
    // 7. Loop Principal do Visualizador/Medidores
    
    const fillL = document.getElementById('fill-l');
    const fillR = document.getElementById('fill-r');
    const fillTreble = document.getElementById('treble-meter-fill');
    const peakL = document.getElementById('peak-l');
    const peakR = document.getElementById('peak-r');
    const peakTreble = document.getElementById('peak-treble');
    
    const levelValL = document.getElementById('level-val-l');
    const levelValR = document.getElementById('level-val-r');
    const levelValT = document.getElementById('level-val-t');
    
    let sensitivity = 1.5;
    let smoothing = 0.8;
    let rotationRate = 0.005;

    document.getElementById('sensitivity-slider').addEventListener('input', (e) => {
        sensitivity = parseFloat(e.target.value);
        document.getElementById('sens-val').textContent = sensitivity.toFixed(2);
    });
    document.getElementById('smoothing-slider').addEventListener('input', (e) => {
        smoothing = parseFloat(e.target.value);
        document.getElementById('smooth-val').textContent = smoothing.toFixed(2);
    });
    document.getElementById('rotation-slider').addEventListener('input', (e) => {
        rotationRate = parseFloat(e.target.value);
        document.getElementById('rot-val').textContent = rotationRate.toFixed(3);
    });
    
    // Função para mapear o valor (entre 0 e 255) para a altura do medidor (entre 0 e 100%)
    function mapToMeterHeight(value) {
        return Math.min(100, (value / 255) * 150 * sensitivity);
    }
    
    let currentRotation = 0;
    const canvas = document.getElementById('spectrum');
    const ctx = canvas.getContext('2d');
    const core = document.getElementById('visualizer-core');
    
    function drawVisualizer(dataArray) {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        const baseRadius = 50;
        const maxBarHeight = 150;
        const barWidth = 2;
        const bars = analyser.frequencyBinCount / 3; // Usa 1/3 das bandas de frequência

        currentRotation += rotationRate;
        ctx.save();
        ctx.translate(centerX, centerY);
        ctx.rotate(currentRotation);
        
        for (let i = 0; i < bars; i++) {
            const angle = (i / bars) * 2 * Math.PI;
            
            // Frequências baixas para o interior, médias/altas para o exterior
            let magnitude;
            if (i < bars / 3) {
                // Bass/Mid-low: Mais afetado por `dataArray[i]`
                magnitude = dataArray[i]; 
            } else {
                // Mid-high/Treble: Afetado por bandas superiores para um visual mais dinâmico
                magnitude = dataArray[i + Math.floor(analyser.frequencyBinCount / 6)];
            }
            
            let height = (magnitude / 255) * maxBarHeight * sensitivity;
            
            const x = Math.cos(angle);
            const y = Math.sin(angle);
            
            const startX = x * baseRadius;
            const startY = y * baseRadius;
            const endX = x * (baseRadius + height);
            const endY = y * (baseRadius + height);
            
            // Cor baseada na frequência/posição
            const hue = (i / bars) * 360; 
            const color = `hsl(${hue}, 100%, 50%)`;
            
            ctx.beginPath();
            ctx.moveTo(startX, startY);
            ctx.lineTo(endX, endY);
            
            ctx.lineWidth = barWidth;
            ctx.strokeStyle = color;
            ctx.shadowBlur = 5;
            ctx.shadowColor = color;
            ctx.stroke();
        }
        ctx.restore();
        
        // Efeito de pulsação no core
        const avg = dataArray.slice(0, 10).reduce((a, b) => a + b, 0) / 10;
        const scale = 1 + (avg / 255) * 0.2; // Aumenta o tamanho em até 20%
        core.style.transform = `scale(${scale})`;
    }
    
    // Funções para VU Meters (simulado)
    let leftLevel = 0;
    let rightLevel = 0;
    let trebleLevel = 0;
    
    function updateVUMeters(dataArray) {
        // Níveis de Bass (Simulado Left/Right - Média de baixas frequências)
        const bassAvg = dataArray.slice(0, 5).reduce((a, b) => a + b, 0) / 5;
        const newLevel = bassAvg * 1.5;
        
        // Aplica suavização (damping) para um movimento mais orgânico
        leftLevel = leftLevel * smoothing + newLevel * (1 - smoothing);
        rightLevel = rightLevel * smoothing + newLevel * (1 - smoothing); 
        
        const heightL = mapToMeterHeight(leftLevel);
        const heightR = mapToMeterHeight(rightLevel);
        
        // Nível de Treble (Simulado - Média de altas frequências)
        const trebleAvg = dataArray.slice(analyser.frequencyBinCount * 0.4, analyser.frequencyBinCount * 0.6).reduce((a, b) => a + b, 0) / (analyser.frequencyBinCount * 0.2);
        trebleLevel = trebleLevel * 0.9 + trebleAvg * 0.1; 
        const heightT = mapToMeterHeight(trebleLevel * 1.2); 
        
        // Atualiza as barras
        fillL.style.height = `${Math.min(100, heightL)}%`;
        fillR.style.height = `${Math.min(100, heightR)}%`;
        fillTreble.style.height = `${Math.min(100, heightT)}%`;
        
        // Peak Hold (Simulado - Mantenha o pico por um tempo)
        // Isso é complexo de simular perfeitamente sem canais estéreo reais
        // Usamos um valor mais rápido para o VU meter
        function updatePeak(peakEl, height) {
            if (height > 5) { // Somente mostra se o nível for significativo
                peakEl.style.top = `${100 - Math.min(100, height)}%`;
                peakEl.style.opacity = 1;
                setTimeout(() => {
                    peakEl.style.opacity = 0;
                }, 500); // Esconde o pico após 500ms
            }
        }
        updatePeak(peakL, heightL);
        updatePeak(peakR, heightR);
        updatePeak(peakTreble, heightT);

        // Atualiza os valores dB (simulado - mapeamento do valor para um range de dB)
        const dbL = Math.min(0, Math.round(20 * Math.log10(heightL / 100) * 2));
        const dbR = Math.min(0, Math.round(20 * Math.log10(heightR / 100) * 2));
        const dbT = Math.min(0, Math.round(20 * Math.log10(heightT / 100) * 2));

        levelValL.textContent = `L: ${dbL.toString().padStart(2, dbL < 0 ? ' ' : '0')} dB`;
        levelValR.textContent = `R: ${dbR.toString().padStart(2, dbR < 0 ? ' ' : '0')} dB`;
        levelValT.textContent = `T: ${dbT.toString().padStart(2, dbT < 0 ? ' ' : '0')} dB`;
    }

    // Loop de Visualização Principal
    function visualizerLoop() {
        if (isPlaying && analyser) {
            const bufferLength = analyser.frequencyBinCount;
            const dataArray = new Uint8Array(bufferLength);
            analyser.getByteFrequencyData(dataArray);

            drawVisualizer(dataArray);
            updateVUMeters(dataArray);
            
            requestAnimationFrame(visualizerLoop);
        }
    }
    
    // 8. Data e Hora
    function updateDateTime() {
        const now = new Date();
        const date = now.toLocaleDateString('pt-BR', { day: '2-digit', month: '2-digit', year: 'numeric' });
        const time = now.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
        document.getElementById('date-time').innerHTML = `DATA: ${date} | HORA: ${time}`;
    }
    setInterval(updateDateTime, 1000);
    updateDateTime(); // Executa ao carregar

    // 9. Troca de Temas
    const themeSelectors = document.getElementById('theme-selectors');
    const themes = {
        'industrial-cyber': 'INDUSTRIAL CYBER',
        'retro-wave': 'RETRO WAVE',
        'neon-city': 'NEON CITY',
        'dark-matter': 'DARK MATTER',
        'matrix-code': 'MATRIX CODE'
        // Adicione todos os seus 26 temas aqui
    };
    
    // Função para aplicar o tema
    function applyTheme(themeName) {
        document.body.className = themeName;
        document.getElementById('theme-name').textContent = themes[themeName].toUpperCase() || themeName.toUpperCase();

        document.querySelectorAll('#theme-selectors button').forEach(btn => {
            btn.classList.remove('active-theme');
            if (btn.dataset.theme === themeName) {
                btn.classList.add('active-theme');
            }
        });
    }
    
    // Adiciona listener aos botões de tema
    themeSelectors.addEventListener('click', (e) => {
        if (e.target.tagName === 'BUTTON' && e.target.dataset.theme) {
            applyTheme(e.target.dataset.theme);
        }
    });

    // Inicia com o tema padrão (industrial-cyber)
    applyTheme('industrial-cyber');


</script>
</body>
</html>
